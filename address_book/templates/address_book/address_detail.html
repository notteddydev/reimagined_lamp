{% extends "address_book/address_book_base.html" %}
{% load getattribute %}

{% block title %}Address Book{% endblock title %}

{% block header %}Address Detail{% endblock header %}

{% block content %}
    {% if object.landline_id %}
        <section>
            <table>
                <caption>Landline</caption>
                <tbody>
                    <tr>
                        <td>{{ object.landline.number }}</td>
                        <td>
                            <a href="{{ object.landline.tel_href }}" target="_blank">Call</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    {% endif %}
    <section>
        <table>
            <caption>Address</caption>
            <tbody>
                {% if address|getattribute:"address_line_1" %}
                    <tr>
                        <td>{{ address.address_line_1 }}</td>
                    </tr>
                {% endif %}
                {% if address|getattribute:"address_line_2" %}
                    <tr>
                        <td>{{ address.address_line_2 }}</td>
                    </tr>
                {% endif %}
                {% if address|getattribute:"neighbourhood" %}
                    <tr>
                        <td>{{ address.neighbourhood }}</td>
                    </tr>
                {% endif %}
                {% if address|getattribute:"city" %}
                    <tr>
                        <td>{{ address.city }}</td>
                    </tr>
                {% endif %}
                {% if address|getattribute:"state" %}
                    <tr>
                        <td>{{ address.state }}</td>
                    </tr>
                {% endif %}
                {% if address|getattribute:"postcode" %}
                    <tr>
                        <td>{{ address.postcode }}</td>
                    </tr>
                {% endif %}
                {% if address|getattribute:"country" %}
                    <tr>
                        <td>{{ address.country.verbose }}</td>
                    </tr>
                {% endif %}
                {% if address|getattribute:"notes" %}
                    <tr>
                        <td>{{ address.notes }}</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </section>
    <section>
        <table>
            <caption>Tenants</caption>
            <tbody>
                {% for contactaddress in object.contactaddress_set.all %}
                    <tr>
                        <td {% if contactaddress.archived %}class="linethrough"{% endif %}>{{ contactaddress.contact }}</td>
                        <td>
                            <a href="{% url "contact-detail" contactaddress.contact.id %}">View</a>
                            <a href="{% url "contact-update" contactaddress.contact.id %}">Update</a>
                            {% if contactaddress.archived %}
                                <a href="">Unarchive</a>
                            {% else %}
                                <a href="">Archive</a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
{% endblock content %}